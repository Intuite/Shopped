<div fxLayout fxLayoutAlign="left left">
    <mat-form-field fxFlex="40%">
        <input matInput type="text" (keyup)="filter($event)" placeholder="Filter">
    </mat-form-field>
</div>
<jhi-wrapper-material-table class="justify-content-center" [dataSource]="dataSource" [columns]="displayedColumns"
                            matSort #sort="matSort">
    <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> ID </th>
        <td mat-cell *matCellDef="let element" >
            <span>
                <a [routerLink]="['./', element.login, 'view']">{{ element.id }}</a>
            </span>
        </td>
    </ng-container>

    <ng-container matColumnDef="login">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Login </th>
        <td mat-cell *matCellDef="let element" >
            <span>
                {{ element.login }}
            </span>
        </td>
    </ng-container>

    <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Email </th>
        <td mat-cell *matCellDef="let element" >
            <span>
                {{ element.email }}
            </span>
        </td>
    </ng-container>

    <ng-container matColumnDef="activated">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Status </th>
        <td mat-cell *matCellDef="let element" >
            <span>
                <button mat-raised-button jhiMaterialColor="danger" class="btn-sm"
                        (click)="managementComponent.setActive(element, true); reload()"
                        *ngIf="!element.activated"
                        jhiTranslate="userManagement.deactivated">Deactivated
                </button>
               <button mat-raised-button jhiMaterialColor="success" class="btn-sm"
                       (click)="managementComponent.setActive(element, false); reload()"
                       *ngIf="element.activated"
                       [disabled]="!managementComponent.currentAccount ||
                       managementComponent.currentAccount.login === element.login"
                       jhiTranslate="userManagement.activated">Activated
               </button>
            </span>
        </td>
    </ng-container>

    <ng-container matColumnDef="langKey">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Lang key </th>
        <td mat-cell *matCellDef="let element">
            <span>{{ element.langKey }}</span>
        </td>
    </ng-container>

    <ng-container matColumnDef="authorities">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Profiles </th>
        <td mat-cell *matCellDef="let element">
            <div *ngFor="let authority of element.authorities">
                <span class="badge badge-info">{{ authority }}</span>
            </div>
        </td>
    </ng-container>

    <ng-container matColumnDef="created_date">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Created date </th>
        <td mat-cell *matCellDef="let element">
            <span>
                 {{ element.createdDate | date:'dd/MM/yy HH:mm' }}
            </span>
        </td>
    </ng-container>

    <ng-container matColumnDef="lastModifiedBy">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Last modified by </th>
        <td mat-cell *matCellDef="let element">
            <span>{{ element.lastModifiedBy }}</span>
        </td>
    </ng-container>

    <ng-container matColumnDef="lastModifiedDate">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Last modified date </th>
        <td mat-cell *matCellDef="let element">
            <span>
                {{ element.lastModifiedDate | date:'dd/MM/yy HH:mm' }}
            </span>
        </td>
    </ng-container>

    <ng-container matColumnDef="options" class="text-right">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Options </th>
        <td mat-cell *matCellDef="let element">
            <div class="btn-group">
                <button type="submit"
                        [routerLink]="['./', element.login, 'view']"
                        class="btn btn-info btn-sm">
                    <fa-icon icon="eye"></fa-icon>
                </button>

                <button type="submit"
                        [routerLink]="['./', element.login, 'edit']"
                        queryParamsHandling="merge"
                        class="btn btn-warning btn-sm">
                    <fa-icon icon="pencil-alt"></fa-icon>
                </button>

                <button type="button" (click)="managementComponent.deleteUser(element)"
                        class="btn btn-danger btn-sm"
                        [disabled]="!managementComponent.currentAccount ||
                         managementComponent.currentAccount.login === element.login">
                    <fa-icon icon="times"></fa-icon>
                </button>
            </div>
        </td>
    </ng-container>
    <!-- Custom row definitions to be provided to the wrapper table. -->
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns; "></tr>
    <mat-paginator [length]="managementComponent.totalItems" [pageSize]="managementComponent.itemsPerPage"
                   [pageSizeOptions]="[5, 10, 20, 50, 100]"></mat-paginator>
</jhi-wrapper-material-table>

